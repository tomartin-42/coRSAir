NAME = coRSAir

FLAGS = -Wall -Wextra -Werror
SANITIZE = -g3 -fsanitize=address
COMPILER = gcc

# Folders
LIBFT_DIR = ./libft/
INC_DIR = inc/
OBJ_DIR = obj/

# Paths
LIBFT = $(addprefix $(LIBFT_DIR),libft.a)

obj:
	@mkdir -p $(OBJ_DIR)

# Libft linkers
LNK = -L$(LIBFT_DIR) -lft

$(LIBFT):
	@make -C $(LIBFT_DIR)

# Files
SRC = main.c

OBJ = $(addprefix $(OBJ_DIR),$(SRC:.c=.o))

$(OBJ_DIR)%.o: %.c
	@$(COMPILER) $(FLAGS) $(SANITIZE) -I$(INC_DIR) -I$(LIBFT_DIR) -c $< -o $@

$(NAME): $(OBJ)
	echo "Compiling $(NAME)..."
	$(COMPILER) $(FLAGS) $(LNK) $(OBJ) -o $(NAME)

# all rule
all: $(LIBFT) $(NAME)

clean:
	@rm -rf $(OBJ_DIR)
	@make -C $(LIBFT_DIR) clean

fclean: clean
	@rm -f $(NAME)
	@make -C $(LIBFT_DIR) fclean

re: fclean all